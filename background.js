var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,c){a.raw=c;return a};$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,d){if(a==Array.prototype||a==Object.prototype)return a;a[c]=d.value;return a};$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");
var $jscomp$lookupPolyfilledValue=function(a,c){var d=$jscomp.propertyToPolyfillSymbol[c];if(null==d)return a[c];d=a[d];return void 0!==d?d:a[c]};$jscomp.polyfill=function(a,c,d,e){c&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,c,d,e):$jscomp.polyfillUnisolated(a,c,d,e))};
$jscomp.polyfillUnisolated=function(a,c,d,e){d=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var b=a[e];b in d||(d[b]={});d=d[b]}a=a[a.length-1];e=d[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:c})};
$jscomp.polyfillIsolated=function(a,c,d,e){var b=a.split(".");a=1===b.length;e=b[0];e=!a&&e in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var g=0;g<b.length-1;g++){var f=b[g];f in e||(e[f]={});e=e[f]}b=b[b.length-1];d=$jscomp.IS_SYMBOL_NATIVE&&"es6"===d?e[b]:null;c=c(d);null!=c&&(a?$jscomp.defineProperty($jscomp.polyfills,b,{configurable:!0,writable:!0,value:c}):c!==d&&($jscomp.propertyToPolyfillSymbol[b]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(b):$jscomp.POLYFILL_PREFIX+b,b=$jscomp.propertyToPolyfillSymbol[b],
$jscomp.defineProperty(e,b,{configurable:!0,writable:!0,value:c})))};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function c(){this.batch_=null}function d(a){return a instanceof b?a:new b(function(b,f){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;c.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(a)};var e=$jscomp.global.setTimeout;c.prototype.asyncExecuteFunction=function(a){e(a,0)};c.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var e=a[b];a[b]=null;try{e()}catch(k){this.asyncThrow_(k)}}}this.batch_=null};c.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var b=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(h){b.reject(h)}};b.prototype.createResolveAndReject_=function(){function a(a){return function(d){e||(e=!0,a.call(b,d))}}var b=this,e=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};b.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var e=null!=a;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};b.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(h){this.reject_(h);return}"function"==typeof b?
this.settleSameAsThenable_(b,a):this.fulfill_(a)};b.prototype.reject_=function(a){this.settle_(2,a)};b.prototype.fulfill_=function(a){this.settle_(1,a)};b.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};b.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)g.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var g=new c;b.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};b.prototype.settleSameAsThenable_=function(a,b){var e=this.createResolveAndReject_();try{a.call(b,e.resolve,e.reject)}catch(k){e.reject(k)}};b.prototype.then=function(a,e){function d(a,b){return"function"==typeof a?function(b){try{c(a(b))}catch(m){f(m)}}:b}var c,f,l=new b(function(a,b){c=a;f=b});this.callWhenSettled_(d(a,c),d(e,f));return l};
b.prototype.catch=function(a){return this.then(void 0,a)};b.prototype.callWhenSettled_=function(a,b){function e(){switch(d.state_){case 1:a(d.result_);break;case 2:b(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?g.asyncExecute(e):this.onSettledCallbacks_.push(e)};b.resolve=d;b.reject=function(a){return new b(function(b,e){e(a)})};b.race=function(a){return new b(function(b,e){for(var c=$jscomp.makeIterator(a),f=c.next();!f.done;f=c.next())d(f.value).callWhenSettled_(b,
e)})};b.all=function(a){var e=$jscomp.makeIterator(a),c=e.next();return c.done?d([]):new b(function(a,b){function f(b){return function(e){g[b]=e;h--;0==h&&a(g)}}var g=[],h=0;do g.push(void 0),h++,d(c.value).callWhenSettled_(f(g.length-1),b),c=e.next();while(!c.done)})};return b},"es6","es3");BASE_URL="https://webcheck-api.edicratic.com";DEFAULT_BLACKLIST="twitter www.linkedin www.amazon www.facebook www.linkedin mail.google outlook.office mail.aol www.google www.zoho mail.com mail.yahoo www.tiktok www.facebook www.whatsapp www.messenger www.instagram www.tiktok www.ebay www.walmart www.target www.alibaba www.wayfair www.wish www.shopify www.youtube www.netflix docs.google support.google vimeo accounts.google drive.google github www.dropbox www.paypal www.dailymotion news.google bitly bit.ly".split(" ");
LIST_TYPE="blacklisted-edicratic";chrome.contextMenus.create({title:"WebCheck This Term",contexts:["selection"],id:"CONTEXT_MENU_ID"});chrome.contextMenus.onClicked.addListener(function(){chrome.storage.local.set({"dummy-highlight":(new Date).getTime()})});chrome.storage.local.get(["authStatus"],function(a){createBadge(a.authStatus)});chrome.storage.onChanged.addListener(function(a,c){a.authStatus&&createBadge(a.authStatus.newValue)});
function createBadge(a){chrome.runtime.lastError||null===a||void 0===a||"Logged Out"===a?(chrome.browserAction.setBadgeText({text:"Off"}),chrome.browserAction.setBadgeBackgroundColor({color:"red"})):(chrome.browserAction.setBadgeText({text:"On"}),chrome.browserAction.setBadgeBackgroundColor({color:"#4688F1"}))}
chrome.runtime.onMessage.addListener(function(a,c,d){"callInternet"===a.message?fetch(a.input,a.params).then(function(a){a.text().then(function(b){d([{body:b,status:a.status,statusText:a.statusText},null])})},function(a){console.log(a);d([null,a])}):"callWebCheckAPI"===a.message?(url=BASE_URL+a.input,fetch(url,a.params).then(function(a){requestFailed=!1;401===a.status?(requestFailed=!0,chrome.storage.local.set({authStatus:"Logged Out"},function(){chrome.runtime.lastError&&console.log("failed to save status, fatal error")})):
200!==a.status&&(requestFailed=!0);a.text().then(function(b){requestFailed?d([null,b]):d([{body:b,status:a.status,statusText:a.statusText},null])})},function(a){console.log(a);d([null,a])})):"NYTimes"===a.message?fetch("https://news.google.com/rss/search?q="+a.term).then(function(a){a.text().then(function(b){d([{body:b,status:a.status,statusText:a.statusText},null])},function(a){d([null,a])})}):"basicGET"===a.message?fetch(a.url).then(function(a){a.text().then(function(b){d([{body:b,status:a.status,
statusText:a.statusText},null])},function(a){d([null,a])})}):"runOAuthFlow"===a.message&&oauthFlow();return!0});chrome.runtime.onInstalled.addListener(function(a){oauthFlow();a={method:"POST",body:JSON.stringify({body:{type:"installed"}}),"Content-Type":"application/json"};fetch(BASE_URL+"/subscription-event",a)});
function getToken(a){return new Promise(function(c,d){var e={method:"POST",body:JSON.stringify({body:{oauth2_identifier:{type:"google",id_token:a}}}),"Content-Type":"application/json"};fetch(BASE_URL+"/token",e).then(function(a){200===a.status?c(a):d(a)}).catch(function(a){d(a)})})}function oauthFlow(){chrome.tabs.create({url:"about:blank"},function(a){chrome.tabs.update(a.id,{url:"https://webcheck.edicratic.com/login.html"})})}
function createDefaultBlackList(){chrome.storage.local.get([LIST_TYPE],function(a){a[LIST_TYPE]||(a={},a[LIST_TYPE]=DEFAULT_BLACKLIST,chrome.storage.local.set(a),chrome.storage.local.set({"button-change-edicratic":{time:(new Date).getTime(),on:!0}}))})}chrome.runtime.setUninstallURL("https://webcheck.edicratic.com/uninstall.html?origin=extension");
